# 蔵書管理システム 要件定義書（Phase 3移行版）

## 1. プロジェクト概要
### 1.1 システム名
蔵書管理システム

### 1.2 目的
個人または小規模組織での書籍管理を効率化し、読書状況の把握と書籍検索の利便性を向上させる

### 1.3 実装状況サマリー
- **Phase 1**: 環境構築 ✅ 完了
- **Phase 2**: バックエンド実装 ✅ 完了
- **Phase 3**: フロントエンド実装 ⏳ **開始予定**
- **Phase 4**: 統合・テスト ⏳ 待機中

## 2. 機能要件（Phase 3実装版）

### 2.1 書籍管理機能
#### 2.1.1 書籍登録 ✅ バックエンド完了 → ⏳ フロントエンド実装予定
- **API実装状況**: BookController::store() ✅ 完了
- **フロントエンド実装予定**: BookCreatePage.vue + BookForm.vue
- **機能要件**:
  - タイトル（必須）
  - 著者（必須）
  - 出版社（任意）
  - 出版年（任意、1000-2100年）
  - ISBN（任意）
  - カテゴリ（任意）
  - 読書状況（必須、enum: unread/reading/read）
- **UI要件**:
  - リアルタイムバリデーション表示
  - エラーメッセージの日本語化
  - 自動保存機能（下書き）
  - モバイル対応フォーム

#### 2.1.2 書籍一覧表示 ✅ バックエンド完了 → ⏳ フロントエンド実装予定
- **API実装状況**: BookController::index() ✅ 動作確認済み
- **フロントエンド実装予定**: BookIndex.vue + BookList.vue + BookCard.vue
- **機能要件**:
  - ページネーション（20件/ページ）
  - 検索・フィルター機能
  - ソート機能（タイトル、著者、作成日時）
- **UI要件**:
  - グリッド・リスト表示切替
  - 書籍カードデザイン（タイトル、著者、ステータス表示）
  - 無限スクロール対応検討
  - レスポンシブグリッド（1〜4列可変）

#### 2.1.3 書籍詳細表示 ✅ バックエンド完了 → ⏳ フロントエンド実装予定
- **API実装状況**: BookController::show() ✅ 完了
- **フロントエンド実装予定**: BookShow.vue + BookDetail.vue
- **UI要件**:
  - 詳細情報の見やすい表示
  - 編集・削除ボタン配置
  - 書影表示エリア（将来拡張用）
  - パンくずナビゲーション

#### 2.1.4 書籍編集 ✅ バックエンド完了 → ⏳ フロントエンド実装予定
- **API実装状況**: BookController::update() ✅ 完了
- **フロントエンド実装予定**: BookEdit.vue + BookForm.vue共通化
- **UI要件**:
  - 既存データの事前入力
  - 変更確認ダイアログ
  - キャンセル時の確認機能

#### 2.1.5 書籍削除 ✅ バックエンド完了 → ⏳ フロントエンド実装予定
- **API実装状況**: BookController::destroy() ✅ 完了
- **フロントエンド実装予定**: ConfirmDialog.vue
- **UI要件**:
  - 削除確認ダイアログ
  - 削除完了通知
  - 一覧からの即座反映

### 2.2 検索・絞り込み機能 ✅ バックエンド完了 → ⏳ フロントエンド実装予定
#### 2.2.1 フリーワード検索
- **API実装状況**: Book::scopeSearch() ✅ 完了
- **フロントエンド実装予定**: SearchBox.vue
- **UI要件**:
  - リアルタイム検索（デバウンス処理 300ms）
  - 検索ハイライト表示
  - 検索履歴機能
  - 検索結果件数表示

#### 2.2.2 カテゴリフィルター
- **API実装状況**: Book::scopeCategory() ✅ 完了
- **フロントエンド実装予定**: BookFilters.vue（サイドバー）
- **UI要件**:
  - ドロップダウン選択
  - カテゴリ別書籍数表示
  - フィルタークリア機能

#### 2.2.3 読書状況フィルター
- **API実装状況**: Book::scopeReadingStatus() ✅ 完了
- **フロントエンド実装予定**: BookFilters.vue
- **UI要件**:
  - ラジオボタンまたはタブ形式
  - ステータス別件数表示
  - カラーコード表示（未読：グレー、読書中：オレンジ、既読：グリーン）

### 2.3 ユーザーインターフェース（Phase 3実装予定）
#### 2.3.1 レスポンシブデザイン ⏳ 実装予定
- **技術**: Tailwind CSS使用
- **ブレークポイント**: 
  - Mobile: < 768px（1列表示）
  - Tablet: 768px - 1024px（2列表示）
  - Desktop: > 1024px（3-4列表示）
- **要件**:
  - モバイルファースト設計
  - タッチ操作対応
  - 画面サイズに応じたナビゲーション切替

#### 2.3.2 通知システム ⏳ 実装予定
- **実装予定**: NotificationToast.vue
- **機能要件**:
  - 成功・エラー・警告・情報の4種類
  - 自動消去（5秒）または手動閉じる
  - 複数通知のスタック表示
  - アニメーション効果

#### 2.3.3 ローディング状態 ⏳ 実装予定
- **実装予定**: LoadingSpinner.vue
- **表示タイミング**:
  - データ読み込み中
  - フォーム送信中
  - ページ遷移中

## 3. 非機能要件

### 3.1 パフォーマンス要件
#### 3.1.1 フロントエンド（Phase 3目標）
- **初回読み込み**: 3秒以内
- **ページ遷移**: 1秒以内
- **検索レスポンス**: 500ms以内（フロントエンド処理）
- **API通信**: 200ms以内（バックエンド処理）✅ 達成済み

#### 3.1.2 データ処理（実装済み）✅
- **ページネーション**: 20件/ページ ✅
- **同時接続**: 10ユーザー程度対応 ✅
- **データベース**: SQLite軽量化 ✅

### 3.2 ユーザビリティ要件（Phase 3実装予定）
#### 3.2.1 操作性
- **直感的操作**: 3クリック以内で全操作完了
- **キーボードナビゲーション**: Tab移動対応
- **エラー回復**: 明確なエラーメッセージと解決策提示

#### 3.2.2 アクセシビリティ
- **カラーコントラスト**: WCAG 2.1 AA準拠
- **フォントサイズ**: 最小14px、読みやすいフォント
- **フォーカス表示**: キーボード操作時の明確な表示

### 3.3 セキュリティ要件
#### 3.3.1 フロントエンド（Phase 3実装予定）
- **XSS防止**: Vue.js自動エスケープ活用
- **入力検証**: フロントエンド・バックエンド二重チェック
- **CSRF保護**: Laravel Sanctum導入検討

#### 3.3.2 バックエンド（実装済み）✅
- **APIバリデーション**: Form Request実装済み ✅
- **SQLインジェクション防止**: Eloquent ORM使用 ✅
- **適切なHTTPステータス**: 実装済み ✅

## 4. 技術要件（Phase 3版）

### 4.1 フロントエンド技術（Phase 3実装予定）
#### 4.1.1 主要技術
- **フレームワーク**: Vue.js 3.4+ （Composition API）
- **ルーティング**: Vue Router 4.2+
- **状態管理**: Pinia 2.1+
- **スタイル**: Tailwind CSS 3.4+
- **アイコン**: Heroicons 2.0+
- **ビルドツール**: Vite 5.0+

#### 4.1.2 開発ツール
- **リンター**: ESLint + Vue専用ルール
- **フォーマッター**: Prettier
- **型チェック**: TypeScript導入検討
- **テスト**: Vitest（Phase 4で実装予定）

### 4.2 バックエンド技術（実装済み）✅
- **フレームワーク**: Laravel 12 ✅
- **言語**: PHP 8.1+ ✅
- **データベース**: SQLite ✅
- **API**: RESTful + Laravel Resources ✅

### 4.3 開発環境要件
#### 4.3.1 必須環境
- **Node.js**: 18.0+ （LTS推奨）
- **npm**: 9.0+
- **PHP**: 8.1+
- **Composer**: 2.0+

#### 4.3.2 推奨環境
- **OS**: Windows 10+, macOS 12+, Ubuntu 20.04+
- **ブラウザ**: Chrome 100+, Firefox 100+, Safari 15+, Edge 100+
- **RAM**: 8GB以上
- **ストレージ**: 1GB以上の空き容量

## 5. データ要件（実装済み）✅

### 5.1 書籍データ（実装確認済み）
```php
id: integer (Primary Key, Auto Increment) ✅
title: string(255, Required) ✅
author: string(255, Required) ✅
publisher: string(255, Nullable) ✅
publication_year: integer(Nullable, 1000-2100) ✅
isbn: string(20, Nullable) ✅
category: string(100, Nullable) ✅
reading_status: enum('unread','reading','read', Required) ✅
created_at: timestamp ✅
updated_at: timestamp ✅
```

### 5.2 テストデータ（投入済み）✅
- Laravel実践入門（技術書、既読）
- Vue.js 3 完全ガイド（技術書、読書中）
- 1984年（小説、既読）

## 6. Phase 3実装計画

### 6.1 実装優先度・スケジュール
#### Step 1: 基盤構築（1時間）【優先度：高】
1. **npm環境設定** (15分)
   - Vue.js 3, Tailwind CSS, その他依存関係インストール
2. **アプリケーション初期化** (20分)
   - app.js エントリーポイント作成
   - App.vue メインコンポーネント作成
3. **Vue Router設定** (15分)
   - ルート定義とページコンポーネント準備
4. **Pinia設定** (10分)
   - bookStore 状態管理ストア作成

#### Step 2: コアコンポーネント（2時間）【優先度：高】
1. **レイアウトコンポーネント** (45分)
   - AppHeader.vue (ナビゲーション、タイトル)
   - AppSidebar.vue (フィルター、統計情報)
   - AppFooter.vue (アプリケーション情報)
2. **UIコンポーネント** (30分)
   - LoadingSpinner.vue (ローディング表示)
   - SearchBox.vue (検索機能)
   - NotificationToast.vue (通知システム)
3. **書籍コンポーネント** (45分)
   - BookCard.vue (書籍カード表示)
   - BookList.vue (一覧コンテナ)
   - BookFilters.vue (フィルター機能)

#### Step 3: ページ実装（2時間）【優先度：高】
1. **書籍一覧ページ** (60分)
   - BookIndex.vue (メインページ)
   - API統合とページネーション
   - 検索・フィルター統合
2. **書籍管理ページ** (60分)
   - BookCreatePage.vue (登録ページ)
   - BookEditPage.vue (編集ページ)
   - BookForm.vue (共通フォーム)
   - BookShowPage.vue (詳細ページ)

#### Step 4: 統合・最適化（30分）【優先度：中】
1. **API統合テスト** (15分)
   - 全CRUD操作の動作確認
   - エラーハンドリング確認
2. **レスポンシブ調整** (15分)
   - モバイル・タブレット・デスクトップ対応確認
   - UI/UX最終調整

### 6.2 成功基準（Phase 3完了条件）
#### 6.2.1 機能要件
- [ ] 書籍一覧表示（検索・フィルター・ページネーション機能付き）
- [ ] 書籍登録フォーム（バリデーション・エラーハンドリング）
- [ ] 書籍編集・削除機能（確認ダイアログ付き）
- [ ] レスポンシブデザイン（モバイル・タブレット・デスクトップ）
- [ ] API統合（全エンドポイント動作確認）

#### 6.2.2 品質要件
- [ ] 直感的なユーザーインターフェース
- [ ] 3秒以内のページ読み込み
- [ ] エラーハンドリングと適切な通知表示
- [ ] ブラウザ互換性（Chrome, Firefox, Safari, Edge）

### 6.3 Phase 4への引き継ぎ事項
- **テスト実装**: ユニットテスト、E2Eテスト
- **パフォーマンス最適化**: バンドルサイズ、画像最適化
- **アクセシビリティ改善**: WCAG準拠
- **本番環境対応**: デプロイ設定、セキュリティ強化

## 7. 制約事項・前提条件

### 7.1 技術制約
- **認証システム**: Phase 3では実装しない（将来拡張）
- **ファイルアップロード**: 書影画像等は将来実装
- **オフライン機能**: 対象外
- **プッシュ通知**: 対象外

### 7.2 データ制約
- **データベース**: SQLite（軽量化優先）
- **同時ユーザー**: 10名程度想定
- **書籍データ**: 1,000冊程度まで快適動作保証

### 7.3 ブラウザ対応
- **サポート対象**: 最新版から2バージョン以内
- **IE対応**: 対象外
- **モバイルブラウザ**: iOS Safari, Android Chrome

## 8. リスク管理

### 8.1 技術リスク
- **Vue.js 3学習コスト**: 段階的実装で対応
- **Tailwind CSS習得**: 基本パターンから開始
- **API統合複雑性**: 既存APIが動作確認済みため低リスク

### 8.2 スケジュールリスク
- **予定時間**: 5.5時間（バッファ含む）
- **最小機能**: 書籍一覧・登録のみでも価値提供可能
- **段階的デリバリー**: Step単位での動作確認

### 8.3 品質リスク
- **ブラウザ互換性**: 主要ブラウザでの早期テスト
- **レスポンシブ対応**: モバイルファースト開発
- **パフォーマンス**: 小規模データでの制約緩和

**Phase 3実装準備完了 - 要件定義に基づいたVue.js SPA開発を開始します！**